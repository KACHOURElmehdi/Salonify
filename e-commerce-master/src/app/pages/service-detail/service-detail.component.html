<div class="service-detail-page">
  <div class="container" *ngIf="service">
    <div class="service-content">
      <div class="service-info">
        <div class="service-image">
          <img [src]="service.image" [alt]="service.name">
          <span class="duration">
            <i class="fas fa-clock"></i> {{service.duration}} min
          </span>
          <span class="location" *ngIf="service.homeService">
            <i class="fas fa-home"></i> Home Service Available
          </span>
        </div>
        <div class="service-details">
          <h1>{{service.name}}</h1>
          <p class="category">{{service.category}}</p>
          <p class="description">{{service.description}}</p>
          <div class="price-info">
            <span class="price">From {{service.price}}</span>
            <span class="duration-text">{{service.duration}} minutes</span>
          </div>
          <div class="features">
            <h3>What's Included</h3>
            <ul>
              <li *ngFor="let feature of service.features">
                <i class="fas fa-check"></i> {{feature}}
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="booking-form">
        <div class="form-card">
          <h2>Book Your Appointment</h2>
          <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
              <label>Service Location</label>
              <div class="location-options">
                <div class="location-option">
                  <input
                    type="radio"
                    id="salon"
                    value="salon"
                    formControlName="location"
                  >
                  <label for="salon">
                    <i class="fas fa-store"></i>
                    At Salon
                  </label>
                </div>
                <div class="location-option" *ngIf="service.homeService">
                  <input
                    type="radio"
                    id="home"
                    value="home"
                    formControlName="location"
                  >
                  <label for="home">
                    <i class="fas fa-home"></i>
                    At Home
                  </label>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="date">Select Date</label>
              <input
                type="date"
                id="date"
                formControlName="date"
                [min]="minDate"
                [class.is-invalid]="date?.invalid && (date?.dirty || date?.touched)"
              >
              <div class="error-message" *ngIf="date?.invalid && (date?.dirty || date?.touched)">
                <span *ngIf="date?.errors?.['required']">Please select a date</span>
              </div>
            </div>

            <div class="form-group">
              <label for="time">Select Time</label>
              <select
                id="time"
                formControlName="time"
                [class.is-invalid]="time?.invalid && (time?.dirty || time?.touched)"
              >
                <option value="">Choose a time slot</option>
                <option *ngFor="let slot of availableTimeSlots" [value]="slot">
                  {{slot}}
                </option>
              </select>
              <div class="error-message" *ngIf="time?.invalid && (time?.dirty || time?.touched)">
                <span *ngIf="time?.errors?.['required']">Please select a time</span>
              </div>
            </div>

            <div class="form-group">
              <label for="stylist">Select Stylist</label>
              <select
                id="stylist"
                formControlName="stylist"
                [class.is-invalid]="stylist?.invalid && (stylist?.dirty || stylist?.touched)"
              >
                <option value="">Choose a stylist</option>
                <option *ngFor="let stylist of availableStylists" [value]="stylist.id">
                  {{stylist.name}} - {{stylist.specialization}}
                </option>
              </select>
              <div class="error-message" *ngIf="stylist?.invalid && (stylist?.dirty || stylist?.touched)">
                <span *ngIf="stylist?.errors?.['required']">Please select a stylist</span>
              </div>
            </div>

            <div class="form-group" *ngIf="bookingForm.get('location')?.value === 'home'">
              <label for="address">Address</label>
              <textarea
                id="address"
                formControlName="address"
                rows="3"
                placeholder="Enter your full address"
                [class.is-invalid]="address?.invalid && (address?.dirty || address?.touched)"
              ></textarea>
              <div class="error-message" *ngIf="address?.invalid && (address?.dirty || address?.touched)">
                <span *ngIf="address?.errors?.['required']">Please enter your address</span>
              </div>
            </div>

            <div class="form-group">
              <label for="notes">Special Notes (Optional)</label>
              <textarea
                id="notes"
                formControlName="notes"
                rows="3"
                placeholder="Any special requests or requirements?"
              ></textarea>
            </div>

            <button
              type="submit"
              class="btn btn-primary"
              [disabled]="bookingForm.invalid || isLoading"
            >
              <span *ngIf="!isLoading">Book Now</span>
              <span *ngIf="isLoading">Booking...</span>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="loading" *ngIf="!service">
    <i class="fas fa-spinner fa-spin"></i>
    <p>Loading service details...</p>
  </div>
</div>
